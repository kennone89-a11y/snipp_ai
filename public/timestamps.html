<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <title>Kenai Timestamps – YouTube & poddar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Kenai favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32 (1).png" />

    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        min-height: 100vh;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          sans-serif;
        background: radial-gradient(circle at top, #07111f 0, #02152a 40%, #000000 100%);
        color: #f5f5ff;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      a {
        color: #7dd3fc;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      .page {
        width: 100%;
        max-width: 1000px;
        border-radius: 24px;
        padding: 28px 32px 32px;
        background: rgba(5, 12, 32, 0.96);
        border: 1px solid rgba(77, 189, 255, 0.25);
        box-shadow: 0 40px 90px rgba(0, 0, 0, 0.9);
      }

      .back-link {
        font-size: 12px;
        margin-bottom: 18px;
        opacity: 0.8;
      }

      h1 {
        font-size: 24px;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        color: #e5f3ff;
        margin-bottom: 6px;
      }

      .subtitle {
        font-size: 13px;
        color: #aab6ff;
        margin-bottom: 24px;
      }

      .section {
        border-radius: 18px;
        border: 1px solid rgba(120, 166, 255, 0.4);
        background: radial-gradient(circle at top left, #0b1430 0, #050a1a 45%, #02030a 100%);
        padding: 18px 18px 16px;
        margin-bottom: 18px;
      }

      .section-title {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.18em;
        color: #8cb3ff;
        margin-bottom: 14px;
      }

      .row {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }

      .col {
        flex: 1 1 0;
        min-width: 0;
      }

      label {
        font-size: 12px;
        color: #c2cffc;
        display: block;
        margin-bottom: 6px;
      }

      input[type="text"] {
        width: 100%;
        border-radius: 999px;
        border: 1px solid rgba(126, 169, 255, 0.45);
        background: rgba(2, 5, 20, 0.95);
        color: #f6f7ff;
        padding: 10px 16px;
        font-size: 13px;
        outline: none;
      }

      input[type="text"]::placeholder {
        color: #59607c;
      }

      input[type="text"]:focus {
        border-color: #4dd4ff;
        box-shadow: 0 0 0 1px rgba(77, 212, 255, 0.4);
      }

      .btn-row {
        margin-top: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      button.primary {
        border-radius: 999px;
        border: none;
        padding: 9px 18px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        background: linear-gradient(135deg, #4ddeff, #8b6bff);
        color: #050816;
        box-shadow: 0 14px 40px rgba(43, 190, 255, 0.6);
        transition: transform 0.15s ease, box-shadow 0.15s ease, filter 0.15s ease;
        white-space: nowrap;
      }

      button.primary:hover {
        transform: translateY(-1px);
        filter: brightness(1.06);
        box-shadow: 0 18px 50px rgba(82, 197, 255, 0.9);
      }

      button.primary:disabled {
        opacity: 0.6;
        cursor: default;
        transform: none;
        box-shadow: none;
      }

      .hint {
        font-size: 11px;
        color: #7f8ab0;
        margin-top: 6px;
      }

      .result-grid {
        display: grid;
        grid-template-columns: minmax(0, 2.1fr) minmax(0, 1fr);
        gap: 16px;
      }

      .card {
        border-radius: 16px;
        border: 1px solid rgba(110, 160, 255, 0.35);
        background: radial-gradient(circle at top left, #070f26 0, #050716 50%, #020309 100%);
        padding: 16px 16px 14px;
        min-height: 126px;
      }

      .card-title {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: #8da2ff;
        margin-bottom: 10px;
      }

      .title-output {
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 8px;
        color: #f3f5ff;
      }

      .summary-output {
        font-size: 12px;
        color: #b8c2ff;
        line-height: 1.5;
        white-space: pre-wrap;
      }

      .hashtags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .hashtags code {
        font-family: inherit;
        font-size: 11px;
        background: rgba(20, 34, 80, 0.95);
        border-radius: 999px;
        padding: 4px 10px;
        border: 1px solid rgba(149, 196, 255, 0.45);
        color: #d9e6ff;
      }

      .chapters {
        list-style: none;
        margin-top: 4px;
      }

      .chapters li {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 6px 4px;
        border-bottom: 1px solid rgba(37, 55, 104, 0.65);
        font-size: 12px;
        color: #d5ddff;
      }

      .chapters li:last-child {
        border-bottom: none;
      }

      .chapter-time {
        font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        font-size: 11px;
        color: #9fd5ff;
        min-width: 52px;
      }

      .status-bar {
        margin-top: 10px;
        font-size: 11px;
        color: #7b87b2;
        display: flex;
        justify-content: space-between;
        gap: 10px;
        align-items: center;
      }

      .ai-status {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 11px;
        color: #a5b8ff;
        min-height: 18px;
      }

      .ai-status.done {
        color: #6efacc;
      }

      .ai-pulse {
        width: 9px;
        height: 9px;
        border-radius: 999px;
        background: radial-gradient(circle, #6efacc 0, #12f7ff 40%, #0b1836 100%);
        box-shadow: 0 0 12px rgba(110, 250, 204, 0.9);
        animation: ai-pulse 1.6s ease-in-out infinite;
      }

      @keyframes ai-pulse {
        0% {
          transform: scale(0.9);
          opacity: 0.7;
        }
        50% {
          transform: scale(1.2);
          opacity: 1;
        }
        100% {
          transform: scale(0.9);
          opacity: 0.7;
        }
      }

      @media (max-width: 768px) {
        body {
          padding: 16px;
        }
        .page {
          padding: 20px 16px 22px;
        }
        .result-grid {
          grid-template-columns: minmax(0, 1fr);
        }
      }     .chapter-timeline {
  position: relative;
  margin-top: 16px;
  height: 10px;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    rgba(0, 255, 255, 0.25),
    rgba(138, 180, 255, 0.5)
  );
  box-shadow: 0 0 20px rgba(0, 200, 255, 0.35);
  overflow: visible;
}

.chapter-marker {
  position: absolute;
  top: -4px;
  width: 10px;
  height: 18px;
  border-radius: 999px;
  background: #00f2ff;
  box-shadow: 0 0 16px rgba(0, 242, 255, 0.9);
  cursor: pointer;
}

.chapter-marker .chapter-tooltip {
  position: absolute;
  left: 50%;
  bottom: 30px;
  transform: translateX(-50%) translateY(8px);
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(10, 18, 40, 0.95);
  border: 1px solid rgba(0, 242, 255, 0.5);
  font-size: 11px;
  white-space: nowrap;
  color: #e6f1ff;
  box-shadow: 0 0 18px rgba(0, 242, 255, 0.6);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.18s ease, transform 0.18s ease;
  z-index: 5;
}

.chapter-marker:hover .chapter-tooltip {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

    </style>
  </head>
  <body>
    <div class="page">
      <div class="back-link">
        <a href="index.html">&larr; Tillbaka till Kenai-hubben</a>
      </div>

      <h1>AI-timestamps &amp; beskrivning för YouTube &amp; poddar</h1>
      <p class="subtitle">
        Klistra in en video- eller podd-URL så hjälper Kenai dig att skapa kapitel,
        sammanfattning och hashtags – klart att klistra in direkt i beskrivningen.
      </p>

      <!-- 1 – URL -->
      <section class="section">
        <div class="section-title">1 – Klistra in URL</div>
        <label for="urlInput">YouTube-länk, podd-länk eller annan publik video/podd-URL</label>
        <input
          id="urlInput"
          type="text"
          placeholder="https://www.youtube.com/watch?v=..."
        />
        <div class="btn-row">
          <button
  id="generateBtn"
  class="kenai-btn"
  onclick="generateTimestamps()"
>
  <span id="generateBtnText">Generera timestamps med AI</span>
</button>
<p id="generateStatus" style="margin-top: 8px; font-size: 12px; opacity: 0.8; display: none;">
  Kenai analyserar din video…
</p>

        </div>
        <p class="hint">
          Kenai läser innehållet och föreslår kapitel, kort sammanfattning och några hashtags
          baserat på din URL.
        </p>
        <div class="ai-status" id="aiStatus"></div>
      </section>

      <!-- 2 – Resultat -->
      <section class="section">
        <div class="section-title">2 – Resultat</div>

        <div class="result-grid">
          <div class="card">
            <div class="card-title">Titel &amp; sammanfattning</div>
           <div id="summaryTitle" class="title-output">
              Titel hämtas när AI är klar…
            </div>
            <div id="summaryOutput" class="summary-output">
              <p id="summaryText" class="result-summary"></p>
              Sammanfattning av videon/podden dyker upp här när AI är klar.
            </div>
          </div>
 
          <div class="card">
            <div class="card-title">Hashtags</div>
            <div id="hashtagsList" class="hashtags">
              <code>#kenai</code>
              <code>#ai</code>
              <code>#timestamps</code>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 16px">
          <div class="card-title">Kapitel</div>
          <ul id="chaptersList" class="chapters-list">
            <div id="chapterTimeline" class="chapter-timeline"></div> 
            <li>
              <span class="chapter-time">00:00</span>
              <span>Intro</span>
            </li>
            <li>
              <span class="chapter-time">00:30</span>
              <span>Exempelkapitel</span>
            </li>
            <li>
              <span class="chapter-time">01:00</span>
              <span>Avslutning</span>
            </li>
        </div>
      </section>
      </ul>
      <!-- Status -->
      <div class="status-bar">
        <span id="statusText">Redo att generera timestamps.</span>
        <span style="opacity: 0.6; font-size: 10px"
          >Obs. Detta är en tidig Kenai-prototyp.</span
        >
      </div>
    </div>

      <script>
  (function () {
    const urlInput = document.getElementById('urlInput');
    const generateBtnEl = document.getElementById('generateBtn');
    const aiStatusEl = document.getElementById('aiStatus');

    const titleEl = document.getElementById('summaryTitle');
    const summaryEl = document.getElementById('summaryText');
    const chaptersEl = document.getElementById('chaptersList');
    const hashtagsEl = document.getElementById('hashtagsList');

    function renderResult(data) {
      if (!data || typeof data !== 'object') {
        console.warn('Tomt/ogiltigt data i renderResult:', data);
        return;
      }

      if (titleEl && data.title) {
        titleEl.textContent = data.title;
      }

      if (summaryEl && data.summary) {
        summaryEl.textContent = data.summary;
      }

      if (chaptersEl && Array.isArray(data.chapters)) {
        chaptersEl.innerHTML = '';
        data.chapters.forEach(function (ch) {
          const li = document.createElement('li');
          li.textContent = (ch.time || '') + '  ' + (ch.title || '');
          chaptersEl.appendChild(li);
        });
      }

      if (hashtagsEl && Array.isArray(data.hashtags)) {
        hashtagsEl.innerHTML = '';
        data.hashtags.forEach(function (tag) {
          const span = document.createElement('span');
          span.className = 'hashtag-pill';
          span.textContent = '#' + tag.replace(/^#/, '');
          hashtagsEl.appendChild(span);
        });
      }
    }

    async function generateTimestamps() {
      if (!urlInput) return;

      const url = urlInput.value.trim();
      if (!url) {
        alert('Klistra in en video- eller podd-URL först.');
        return;
      }

      if (aiStatusEl) {
        aiStatusEl.textContent = 'AI jobbar...';
      }
      if (generateBtnEl) {
        generateBtnEl.disabled = true;
        generateBtnEl.textContent = 'AI jobbar...';
      }

      try {
        const res = await fetch('/api/timestamps', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ url })
        });

        if (!res.ok) {
          const txt = await res.text();
          throw new Error('Backend-svar: ' + res.status + ' ' + res.statusText + ' – ' + txt);
        }

        const json = await res.json();
        console.log('Timestamps JSON:', json);

        renderResult(json);

        if (aiStatusEl) {
          aiStatusEl.textContent = 'Klar! Timestamps genererade ✅';
        }
      } catch (error) {
        console.error('Fel vid timestamps-anrop:', error);
        if (aiStatusEl) {
          aiStatusEl.textContent = 'Något gick fel. Försök igen.';
        }
      } finally {
        if (generateBtnEl) {
          generateBtnEl.disabled = false;
          generateBtnEl.textContent = 'Generera timestamps med AI';
        }
      }
    }

    if (generateBtnEl) {
      generateBtnEl.addEventListener('click', function () {
        generateTimestamps();
      });
    }

    if (urlInput) {
      urlInput.addEventListener('keydown', function (e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          generateTimestamps();
        }
      });
    }
  })();
</script>

      

