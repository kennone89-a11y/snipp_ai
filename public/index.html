<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>snipp_ai</title>
  <style>
    body{margin:0;padding:24px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#0b0f14;color:#e9eef5}
    .wrap{max-width:920px;margin:0 auto}
    h1{font-size:24px;margin:0 0 16px}
    .card{background:#101722;border:1px solid #223246;border-radius:12px;padding:16px;margin-top:16px}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .btn{padding:10px 14px;border-radius:10px;border:1px solid #223246;background:#0f1520;color:#e9eef5;cursor:pointer}
    .btn[disabled]{opacity:.5;cursor:not-allowed}
    .btnStart{background:#0d6efd;border-color:#0b5ed7}
    .btnStop{background:#dc3545;border-color:#bb2d3b}
    .muted{color:#98a6b5}
  </style>

  <!-- NUKA SERVICE WORKER/CACHE PÅ EN GÅNG -->
  <script>
    (async()=>{try{
      const regs = await navigator.serviceWorker?.getRegistrations?.();
      regs?.forEach(r=>r.unregister());
      // rensa gamla caches om sådana finns
      if (window.caches?.keys) {
        const ks = await caches.keys();
        await Promise.all(ks.map(k=>caches.delete(k)));
      }
    }catch(e){/* ignore */}})();
  </script>
</head>
<body>
  <div class="wrap">
    <h1>snipp_ai</h1>

    <div class="card">
      <h3 style="margin-top:0">Inspelning</h3>
      <div class="row" style="margin-top:8px">
        <button id="recordBtn" class="btn btnStart" onclick="startRec()">Starta inspelning</button>
        <button id="stopBtn"  class="btn btnStop"  onclick="stopRec()" disabled>Stoppa</button>
      </div>
      <small id="codec" class="muted" style="display:block;margin-top:8px"></small>
    </div>
  </div>

  <!-- ENDA scripts (lägg ALL JS i app.js) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="./app.js?v=10" defer></script>

</body>
</html>
