<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kenai - Recorder</title>
  <!-- Enkel CSS, inga externa beroenden -->
  <style>
    :root { --bg:#0b0f14; --card:#111723; --muted:#8aa0b6; --text:#e6eef7; --ok:#29bf12; --err:#ff006e; }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto}
    .wrap{max-width:860px;margin:32px auto;padding:20px}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{margin:0 0 8px}
    p.muted{color:var(--muted);margin:4px 0 16px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    button{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    #startBtn{background:var(--ok);color:#000}
    #stopBtn{background:var(--err);color:#fff}
    #stopBtn[disabled], #startBtn[disabled]{opacity:.45;cursor:not-allowed}
    .controls{display:flex;gap:10px;align-items:center;margin:8px 0 4px}
    select{background:#0a0e14;color:#e6eef7;border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:8px}
    .kv{display:grid;grid-template-columns:140px 1fr;gap:6px 12px;margin:10px 0 4px}
    .kv b{color:#9ec3ff}
    small#status{display:block;white-space:pre-wrap;background:#0a0e14;border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:10px;margin-top:10px;min-height:54px;color:var(--muted)}
    audio{width:100%;margin-top:12px}
    a.action{display:inline-block;margin-top:10px;color:#fff;text-decoration:none;border:1px solid rgba(255,255,255,.2);padding:8px 12px;border-radius:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Kenai - Recorder</h1>
      <p class="muted">WAV-only, 44.1 kHz mono, Auto-stop, extern JS, Supabase-upload.</p>

      <div class="row">
        <button id="startBtn">Starta inspelning</button>
        <button id="stopBtn" disabled>Stoppa</button>
        <span id="dot" style="margin-left:8px">status: idle</span>
      </div>

      <div class="controls">
        <label for="maxlen">Maxlängd:</label>
        <select id="maxlen">
          <option value="30000">00:30</option>
          <option value="60000">01:00</option>
          <option value="120000" selected>02:00</option>
          <option value="300000">05:00</option>
        </select>
        <span style="margin-left:8px;color:#9ec3ff">Mono, 44100 Hz</span>
      </div>

      <div class="kv">
        <b>Tillstånd:</b><span id="state">idle</span>
        <b>Codec:</b><span id="codec">-</span>
        <b>MIME:</b><span id="mime">-</span>
        <b>Filnamn:</b><span id="fname">-</span>
        <b>Storlek:</b><span id="fsize">-</span>
        <b>Varaktighet:</b><span id="dur">00:00</span>
        <b>UA:</b><span id="ua"></span>
      </div>

      <small id="status">Klar. Tryck Starta for att begara mikrofonatkomst.</small>
      <audio id="player" controls></audio>
      <div>
        <a id="dl" class="action" download style="display:none">Ladda ner</a>
        <a id="share" class="action" target="_blank" rel="noopener" style="display:none">Oppna fil</a>
        <a id="copy" class="action" href="javascript:void(0)" style="display:none">Kopiera lank</a>
      </div>
    </div>
  </div>

  <!-- Ladda extern JS (kontrollera exakt filnamn och sökväg) -->
  <script src="app3.js" defer></script>
</body>
</html>
