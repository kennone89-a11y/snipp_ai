<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kenai ¬∑ R√∂stinspelning</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0b0d11;color:#e7e9ee;margin:0;padding:0}
    .wrap{max-width:900px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    h1{font-size:20px;margin:0}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    button{background:#1f6feb;border:0;color:#fff;padding:10px 14px;border-radius:10px;cursor:pointer}
    button.secondary{background:#2d333b}
    button:disabled{opacity:.5;cursor:not-allowed}
    .card{background:#161b22;border:1px solid #21262d;border-radius:14px;padding:16px;margin:14px 0}
    audio{width:100%}
    ul{list-style:none;padding:0;margin:0}
    li{border-bottom:1px solid #222831;padding:10px 0}
    li:last-child{border-bottom:0}
    .muted{color:#a4aab4}
    .status{margin-top:8px;color:#9be9a8}
    .danger{color:#ff9b9b}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üéôÔ∏è Kenai ‚Äì R√∂stinspelning</h1>
      <div class="row">
        <button id="btnStart">Starta inspelning</button>
        <button id="btnStop" disabled>Stoppa</button>
        <button id="btnUpload" disabled>Ladda upp</button>
      </div>
    </header>

    <div class="card">
      <div class="row">
        <input id="fileInput" type="file" accept="audio/*" style="display:none" />
        <audio id="player" controls></audio>
      </div>
      <p id="status" class="status">Redo.</p>
      <p id="result" class="muted"></p>
    </div>

    <div class="card">
      <div class="row" style="justify-content:space-between">
        <strong>Senaste uppladdningar</strong>
        <button id="refreshBtn" class="secondary">Uppdatera</button>
      </div>
      <ul id="history"><li class="muted">Ingen historik √§nnu.</li></ul>
    </div>
  </div>

  <!-- Supabase lib -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <!-- INITIERA SUPABASE (BYT DINA V√ÑRDEN) -->
  <script>
    // Byt till din riktiga Project URL (supabase.co)
    const SUPABASE_URL =https://hywwzzzxgagqhlxooekz.supabase.co`.trim().replace(/\s/g,"");

    // Klistra in HELA anon public key mellan backticks (`)
    const SUPABASE_ANON_KEY = `
YOUR_SUPABASE_ANON_KEY
`.trim().replace(/\s/g,"");

    try {
      window.sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
      console.log("sb ready?", !!window.sb);
    } catch (e) {
      console.error("Supabase init failed:", e);
      window.sb = null;
    }
  </script>

  <!-- App-koden (m√•ste laddas EFTER att sb skapats) -->
  <script src="app.js?v=10"></script>

  <!-- N√ñD: tvinga knappar klickbara om n√•got annat skiter sig -->
  <script>
    window.addEventListener('load', () => {
      ['btnStart','btnStop','btnUpload'].forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        el.removeAttribute('disabled');
        el.style.pointerEvents = 'auto';
      });
    });
  </script>
</body>
</html>
